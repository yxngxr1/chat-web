<div class="dialog-container">
    <h2 mat-dialog-title>{{ data.isGroup ? 'Create Group Chat' : 'Create Private Chat' }}</h2>
    <mat-dialog-content>
        <mat-form-field>
            <input matInput placeholder="Search by username" [(ngModel)]="searchQuery" (input)="filterUsers()">
        </mat-form-field>
        <mat-list>
            <mat-list-item matRipple *ngFor="let user of filteredUsers"
                (click)="toggleUserSelection(user)" [ngClass]="{'selected-user': user.selected}">
                <div class="user-item">
                    <span>{{ user.username }}</span>
                    <mat-checkbox *ngIf="data.isGroup" [(ngModel)]="user.selected" (click)="$event.stopPropagation()"></mat-checkbox>
                </div>
            </mat-list-item>
        </mat-list>
    </mat-dialog-content>
    <mat-dialog-actions>
        <button mat-button (click)="dialogRef.close()">Cancel</button>
        <button mat-raised-button color="primary" (click)="createChat()">Create</button>
    </mat-dialog-actions>
</div>