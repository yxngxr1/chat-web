{"openapi":"3.1.0","info":{"title":"OpenAPI definition","version":"v0"},"servers":[{"url":"http://localhost:8080","description":"Generated server url"}],"tags":[{"name":"Пользователи","description":"API для управления пользователями"},{"name":"Сообщения","description":"API для работы с сообщениями чатов"},{"name":"Аутентификация","description":"API для входа и обновления токена"},{"name":"Чаты","description":"API для управления чатами"}],"paths":{"/api/users":{"get":{"tags":["Пользователи"],"summary":"Получение всех пользователей","description":"Возвращает список всех пользователей","operationId":"getAllUsers","responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/UserDTO"}}}}}},"security":[{"bearerAuth":[]}]},"put":{"tags":["Пользователи"],"summary":"Обновление данных пользователя","description":"Обновляет информацию о пользователе","operationId":"updateUser","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserUpdateRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginResponse"}}}}},"security":[{"bearerAuth":[]}]},"post":{"tags":["Пользователи"],"summary":"Создание нового пользователя","description":"Создает нового пользователя и возвращает ответ с токеном","operationId":"createUser","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserCreateRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginResponse"}}}}}}},"/api/messages/chat/{chatId}/msg/{msgId}":{"put":{"tags":["Сообщения"],"summary":"Обновление сообщения","description":"Обновляет сообщение в чате","operationId":"updateMessage","parameters":[{"name":"chatId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"msgId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageUpdateRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageDTO"}}}}},"security":[{"bearerAuth":[]}]},"delete":{"tags":["Сообщения"],"summary":"Удаление сообщения","description":"Удаляет сообщение из чата","operationId":"deleteMessage","parameters":[{"name":"chatId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"msgId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK"}},"security":[{"bearerAuth":[]}]}},"/api/chats/{chatId}":{"get":{"tags":["Чаты"],"summary":"Получить информацию о чате","description":"Возвращает информацию о чате по его идентификатору","operationId":"getChatById","parameters":[{"name":"chatId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatDTO"}}}}},"security":[{"bearerAuth":[]}]},"put":{"tags":["Чаты"],"summary":"Обновление чата","description":"Обновляет информацию о чате","operationId":"updateChat","parameters":[{"name":"chatId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatUpdateRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatDTO"}}}}},"security":[{"bearerAuth":[]}]},"delete":{"tags":["Чаты"],"summary":"Удаление чата","description":"Удаляет чат по идентификатору","operationId":"deleteChat","parameters":[{"name":"chatId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK"}},"security":[{"bearerAuth":[]}]}},"/api/messages/chat/{chatId}":{"get":{"tags":["Сообщения"],"summary":"Получение сообщений чата","description":"Возвращает все сообщения для указанного чата","operationId":"getAllMessagesByChatId","parameters":[{"name":"chatId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/MessageDTO"}}}}}},"security":[{"bearerAuth":[]}]},"post":{"tags":["Сообщения"],"summary":"Отправка сообщения","description":"Отправляет новое сообщение в чат","operationId":"sendMessage","parameters":[{"name":"chatId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageCreateRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageDTO"}}}}},"security":[{"bearerAuth":[]}]}},"/api/chats":{"get":{"tags":["Чаты"],"summary":"Получить чаты текущего пользователя","description":"Возвращает чаты, в которых участвует текущий пользователь","operationId":"getAllChatsByUser","responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ChatDTO"}}}}}},"security":[{"bearerAuth":[]}]},"post":{"tags":["Чаты"],"summary":"Создание нового чата","description":"Создает новый чат с участниками","operationId":"createChat","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatCreateRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatDTO"}}}}},"security":[{"bearerAuth":[]}]}},"/api/chats/{chatId}/join":{"post":{"tags":["Чаты"],"summary":"Добавление пользователя в чат","description":"Добавляет пользователя в чат","operationId":"joinUserInChat","parameters":[{"name":"chatId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatUserCreateRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatUserCreateResponse"}}}}},"security":[{"bearerAuth":[]}]}},"/api/auth/refresh_token":{"post":{"tags":["Аутентификация"],"summary":"Обновление токена","description":"Обновляет токен доступа по refresh-токену","operationId":"refreshToken","responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginResponse"}}}}}}},"/api/auth/access_token":{"post":{"tags":["Аутентификация"],"summary":"Получение токена","description":"Аутентифицирует пользователя и возвращает токен доступа","operationId":"login","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginResponse"}}}}}}},"/api/users/{userId}":{"get":{"tags":["Пользователи"],"summary":"Получение информации о пользователе","description":"Возвращает информацию о пользователе по его ID","operationId":"getUserById","parameters":[{"name":"userId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserDTO"}}}}},"security":[{"bearerAuth":[]}]},"delete":{"tags":["Пользователи"],"summary":"Удаление пользователя","description":"Удаляет пользователя по ID","operationId":"deleteUser","parameters":[{"name":"userId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK"}},"security":[{"bearerAuth":[]}]}},"/api/users/my_role":{"get":{"tags":["Пользователи"],"summary":"Получить мою роль","description":"Возвращает роль пользователя в системе","operationId":"getUserRoles","responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"array","items":{"type":"string"}}}}}},"security":[{"bearerAuth":[]}]}},"/api/users/me":{"get":{"tags":["Пользователи"],"summary":"Получение информации о себе","description":"Возвращает информацию о пользователе по его токену","operationId":"getMe","responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserDTO"}}}}},"security":[{"bearerAuth":[]}]},"delete":{"tags":["Пользователи"],"summary":"Удаление пользователя (себя)","description":"Удаляет пользователя по контексту","operationId":"deleteUser_1","responses":{"200":{"description":"OK"}},"security":[{"bearerAuth":[]}]}},"/api/users/chat/{chatId}":{"get":{"tags":["Пользователи"],"summary":"Получить список пользователей чата","description":"Возвращает список пользователей, которые состоят в чате","operationId":"getUsersByChatId","parameters":[{"name":"chatId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/UserDTO"}}}}}},"security":[{"bearerAuth":[]}]}},"/api/chats/all":{"get":{"tags":["Чаты"],"summary":"Получить список чатов","description":"Возвращает все чаты текущего пользователя","operationId":"getAllChats","responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ChatDTO"}}}}}},"security":[{"bearerAuth":[]}]}},"/api/chats/{chatId}/leave":{"delete":{"tags":["Чаты"],"summary":"Удаление пользователя из чата","description":"Удаляет пользователя из чата","operationId":"leaveUserFromChat","parameters":[{"name":"chatId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatUserDeleteRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatUserDeleteResponse"}}}}},"security":[{"bearerAuth":[]}]}}},"components":{"schemas":{"UserUpdateRequest":{"type":"object","description":"Запрос на обновление данных пользователя, включая имя, email и пароль","properties":{"username":{"type":"string","description":"Имя пользователя","example":"Jon","maxLength":20,"minLength":3},"email":{"type":"string","description":"Адрес электронной почты","example":"jondoe@gmail.com"},"password":{"type":"string","description":"Пароль","example":"my_1secret1_password","maxLength":255,"minLength":8}}},"LoginResponse":{"type":"object","description":"Ответ c токеном доступа","properties":{"accessToken":{"type":"string","description":"Токен доступа","example":"eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhZG1pbiIsImV4cCI6MTYyMjUwNj..."},"refreshToken":{"type":"string","description":"Рефреш токен","example":"eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhZG1pbiIsImV4cCI6MTYyMjUwNj..."}},"required":["accessToken","refreshToken"]},"MessageUpdateRequest":{"type":"object","description":"Запрос на обновление содержания сообщения","properties":{"content":{"type":"string","description":"Новый текст сообщения","example":"Обновленное сообщение"}}},"MessageDTO":{"type":"object","description":"Представление сообщения в чате, включая ID, чат, отправителя, текст и время отправки","properties":{"id":{"type":"integer","format":"int64","description":"Идентификатор сообщения","example":1},"chatId":{"type":"integer","format":"int64","description":"Идентификатор чата, в котором находится сообщение","example":1},"senderId":{"type":"integer","format":"int64","description":"Идентификатор отправителя сообщения","example":123},"content":{"type":"string","description":"Текст сообщения","example":"Привет, как дела?"},"sentAt":{"type":"string","format":"date-time","description":"Дата и время отправки сообщения","example":"2025-03-20T14:30:00"}},"required":["chatId","content","id","senderId","sentAt"]},"ChatUpdateRequest":{"type":"object","description":"Запрос для обновления информации о чате","properties":{"name":{"type":"string","description":"Новое название чата","example":"Обновленный чат"},"description":{"type":"string","description":"Новое описание чата","example":"Чат для обсуждения актуальных вопросов"}}},"ChatDTO":{"type":"object","description":"Информация о чате","properties":{"id":{"type":"integer","format":"int64","description":"Идентификатор чата","example":1},"name":{"type":"string","description":"Название чата","example":"Общий чат"},"description":{"type":"string","description":"Описание чата","example":"Чат для обсуждения общих вопросов"},"creatorId":{"type":"integer","format":"int64","description":"Создатель чата","example":1},"type":{"type":"string","description":"Тип чата","enum":["PRIVATE","GROUP","SELF"]},"createdAt":{"type":"string","format":"date-time","description":"Дата и время создания чата","example":"2025-03-20T14:30:00"}},"required":["createdAt","creatorId","description","id","name","type"]},"UserCreateRequest":{"type":"object","description":"Запрос на создание нового пользователя","properties":{"username":{"type":"string","description":"Имя пользователя","example":"Jon","maxLength":20,"minLength":3},"email":{"type":"string","description":"Адрес электронной почты","example":"jondoe@gmail.com"},"password":{"type":"string","description":"Пароль","example":"my_1secret1_password","maxLength":255,"minLength":3}},"required":["email","password","username"]},"MessageCreateRequest":{"type":"object","description":"Запрос на создание нового сообщения в чате","properties":{"content":{"type":"string","description":"Текст сообщения","example":"Привет, как дела?","maxLength":10000,"minLength":1}},"required":["content"]},"ChatCreateRequest":{"type":"object","description":"Запрос для создания нового чата","properties":{"userIds":{"type":"array","description":"Список идентификаторов пользователей для чата. Все ID должны быть положительными.","example":[1,2,3],"items":{"type":"integer","format":"int64"}},"chatType":{"type":"string","description":"Тип чата, который будет создан.","enum":["PRIVATE","GROUP","SELF"],"example":"GROUP"}},"required":["chatType"]},"ChatUserCreateRequest":{"type":"object","description":"Запрос на добавление пользователей в чат","properties":{"userIds":{"type":"array","description":"Список идентификаторов пользователей для чата. Все ID должны быть положительными.","example":[1,2,3],"items":{"type":"integer","format":"int64"}}}},"ChatUserCreateResponse":{"type":"object","description":"Ответ при добавлении пользователя в чат","properties":{"chatId":{"type":"integer","format":"int64","description":"Идентификатор чата","example":1},"userIds":{"type":"array","description":"Список идентификаторов пользователей для чата. Все ID должны быть положительными.","example":[1,2,3],"items":{"type":"integer","format":"int64"}}},"required":["chatId"]},"LoginRequest":{"type":"object","description":"Запрос на получение токена","properties":{"username":{"type":"string","description":"Имя пользователя","example":"Jon","maxLength":20,"minLength":3},"password":{"type":"string","description":"Пароль","example":"my_1secret1_password","maxLength":255,"minLength":3}},"required":["password","username"]},"UserDTO":{"type":"object","description":"Представление данных пользователя, включая ID, имя, email и дату создания","properties":{"id":{"type":"integer","format":"int64","description":"Идентификатор пользователя","example":1},"username":{"type":"string","description":"Имя пользователя","example":"Jon"},"email":{"type":"string","description":"Адрес электронной почты","example":"jondoe@gmail.com"},"createdAt":{"type":"string","format":"date-time","description":"Дата и время создания пользователя","example":"2025-03-20T12:00:00"}},"required":["createdAt","email","id","username"]},"ChatUserDeleteRequest":{"type":"object","description":"Запрос на удаление пользователей из чата","properties":{"userIds":{"type":"array","description":"Список идентификаторов пользователей для чата. Все ID должны быть положительными.","example":[1,2,3],"items":{"type":"integer","format":"int64"}}}},"ChatUserDeleteResponse":{"type":"object","description":"Ответ при удалении пользователей из чата","properties":{"chatId":{"type":"integer","format":"int64","description":"Идентификатор чата","example":1},"userIds":{"type":"array","description":"Список выгнанных идентификаторов пользователей из чата.","example":[1,2,3],"items":{"type":"integer","format":"int64"}}},"required":["chatId"]}},"securitySchemes":{"bearerAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}}}}